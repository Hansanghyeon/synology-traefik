################################################################
#
# Configuration sample for Traefik v2.
#
# master
# For Traefik v2: https://github.com/traefik/traefik/blob/master/traefik.sample.yml
# sample
# For Traefik v1: https://github.com/traefik/traefik/blob/v1.7/traefik.sample.toml
#
################################################################

################################################################
# Global configuration
################################################################

global:
  checkNewVersion: true
  sendAnonymousUsage: true

################################################################
# Traefik logs configuration
################################################################

log:
  level: DEBUG

################################################################
# Access logs configuration
################################################################

accessLog:
  filePath: /traefik.log
  bufferingSize: 100
  filters:
    statusCodes: ["400-499"]

################################################################
# API and dashboard configuration
################################################################

api:
  insecure: true

################################################################
# EntryPoints configuration
################################################################

entryPoints:
  http:
    address: :80
    # Redirect
    http:
      redirections:
        entryPoint:
          to: https
          scheme: https
  https:
    address: :443

################################################################
# Docker configuration backend
################################################################

providers:
  docker:
    watch: true
    endpoint: unix:///var/run/docker.sock
    exposedbydefault: false
    network: traefik_proxy
  file:
    directory: /rules
    watch: true
################################################################
# 인증서
# example: https://doc.traefik.io/traefik/https/acme/
################################################################

certificatesResolvers:
  leresolver:
    acme:
      email: certificate@hyeon.pro
      storage: /acme/acme.json
      httpChallenge:
        entryPoint: http

################################################################
# pilot
# https://pilot.traefik.io/
################################################################

pilot:
    token: "1103ca78-8def-43c3-91f0-81b5957e71d8"

################################################################
# experimental
################################################################

experimental:
  plugins:
    plugin-rewritebody:
      moduleName: "github.com/traefik/plugin-rewritebody"
      version: "v0.3.1"
    plugin-blockpath:
      moduleName: "github.com/traefik/plugin-blockpath"
      version: "v0.2.1"
  hub: true

################################################################
# Traefik hub
################################################################

hub:
  tls:
    insecure: true

metrics:
  prometheus:
    addRoutersLabels: true